@model IDM.DTO.Custom_OutDoc_DTO
@{
    ViewBag.Title = "Xaric olan sənəd [" + Model.docRegNo + "]";
}
<div class="alert alert-info alert-block">
    <h4 class="alert-heading"><i class="fa-fw fa fa-edit"></i> @ViewBag.Title</h4>
</div>
    <div class="row">
        <div class="col-sm-5">
            <div class="well well-sm">
                <div class="row">
                    <div class="form-group col-md-6">
                        <label class="company">Sənədin nömrəsi</label>
                        @Html.TextBoxFor(m => m.docRegNo, "", new { @class = "form-control", disabled = "disabled", autocomplete = "off" })
                    </div>
                    <div class="form-group col-md-6">
                        <label class="company">Sənədin növü</label>
                        @Html.DropDownListFor(m => m.docType, new SelectList(ViewBag.DocTypes, "id", "title"), new { @class = "form-control", disabled = "disabled" })
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-4">
                        <label class="company">Sənədin tarixi</label>
                        <div class="input-group">
                            @Html.TextBoxFor(m => m.docRegDate, "", new { @class = "form-control dateChange", disabled = "disabled", autocomplete = "off" })
                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label class="company">Sənədin icra müddəti (gün)</label>
                        @Html.TextBoxFor(m => m.docDayCount, "", new { @class = "form-control dateChange", disabled = "disabled", autocomplete = "off" })
                    </div>
                    <div class="form-group col-md-4">
                        <label class="company">Sənədin icrasının bitmə tarixi</label>
                        <div class="input-group">
                            <span class="form-control" disabled="disabled" id="docFinishDatespan">@Model.docFinishDate</span>
                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        @Html.CheckBoxFor(m => m.docInCharge, new { disabled = "disabled" })
                        <i></i>Nəzarətdədir
                    </div>
                </div>
            </div>
            <br />
            <div class="well well-sm">
                <p class="alert alert-warning">Sənədin məzmunu</p>
                <div class="row">
                    <div class="form-group col-md-12">
                        @Html.Raw(@Model.docContent)
                    </div>
                </div>
            </div>
            <br />
            <div class="well well-sm">
                <p class="alert alert-warning">Sənəd haqqında qeydlər</p>
                <div class="row">
                    <div class="form-group col-md-12">
                        @Html.Raw(@Model.docNote)
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-7">
            <div class="well well-sm">
                <div class="row">
                    <div class="form-group col-md-4">
                        <label class="company">Daxil olan sənədin nömrəsi</label>
                        <div class="input-group input-group-md">
                            <div class="addon-md">
                                @Html.HiddenFor(m => m.relatedDocNo, new { @class = "form-control", disabled = "disabled" })
                                <span class="form-control" disabled = "disabled" id="relatedDocNospan">@Model.relatedDocNo</span>
                            </div>
                            <span class="input-group-btn">
                                <a href="#" class="btn btn-sm btn-primary pull-right" data-toggle="modal" data-target="#myModalSearch"> <i class="fa fa-search"></i></a>
                            </span>
                        </div>
                        @*<p class="note" id="responseDocRegDate1"></p>*@
                    </div>
                    <div class="form-group col-md-4">
                        <label class="company">Daxil olan sənədin tarixi</label>
                        @Html.HiddenFor(m => m.relatedDocRegDate, new { @class = "form-control", disabled = "disabled" })
                        <div class="input-group">
                            <span class="form-control" disabled = "disabled" id="relatedDocRegDatespan">@Model.relatedDocRegDate</span>
                            <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                        </div>
                    </div>
                    <div class="form-group col-md-4">
                        <label class="company">Poçt üçün göndəriləcək əməkdaş</label>
                        @Html.DropDownList("conTypeID", new SelectList(ViewBag.ContactType, "id", "title"), new { @class = "form-control", disabled = "disabled" })
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-12">
                        <table class="table" id="organizationTable">
                            <thead>
                                <tr>
                                    <th>Göndəriləcək təşkilatın adı</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-6">
                        <label for="company">Tematika</label>
                        @Html.DropDownList("tematikaID", new SelectList(ViewBag.Tematika, "id", "title"), new { @class = "form-control", disabled = "disabled" })
                    </div>
                    <div class="form-group col-md-6">
                        <label for="company">İmzalayan şəxs</label>
                        @Html.DropDownList("tematikaID1", new SelectList(ViewBag.Tematika, "id", "title"), new { @class = "form-control", disabled = "disabled" })
                    </div>
                </div>
            </div>
            <br />
            <div class="well well-sm">
                <div class="row">
                    <div class="form-group col-md-4">
                        <label for="company">Adı</label>
                        @Html.TextBoxFor(m => m.name, new { @class = "form-control", disabled = "disabled" })
                    </div>
                    <div class="form-group col-md-4">
                        <label for="company">Soyadı</label>
                        @Html.TextBoxFor(m => m.surname, new { @class = "form-control", disabled = "disabled" })
                    </div>
                    <div class="form-group col-md-4">
                        <label for="company">Ata adı</label>
                        @Html.TextBoxFor(m => m.middlename, new { @class = "form-control", disabled = "disabled" })
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-4">
                        <label for="company">Ölkə</label>
                        @Html.DropDownListFor(m => m.countryID, new SelectList(ViewBag.Region, "id", "title"), "Ölkəni seçin", new { @class = "form-control", disabled = "disabled" })
                    </div>
                    <div class="form-group col-md-4">
                        <label for="company">Şəhər/rayon</label>
                        @Html.DropDownListFor(m => m.cityID, Enumerable.Empty<SelectListItem>(), new { @class = "form-control", disabled = "disabled" })
                    </div>
                    <div class="form-group col-md-4">
                        <label for="company">Kənd/qəsəbə</label>
                        @Html.DropDownListFor(m => m.townID, Enumerable.Empty<SelectListItem>(), new { @class = "form-control", disabled = "disabled" })
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-md-9">
                        <label for="company">Tam ünvan</label>
                        @Html.TextBoxFor(m => m.fulladdress, new { @class = "form-control", disabled = "disabled" })
                    </div>
                    <div class="form-group col-md-3">
                        <label for="company">FİN/VÖEN</label>
                        @Html.TextBoxFor(m => m.voen, new { @class = "form-control", disabled = "disabled" })
                    </div>
                </div>
            </div>
            <br />
            <div class="well well-sm">
                <p class="alert alert-warning">Elektron sənədlər</p>
                <table class="table" id="attachTable">
                    <thead>
                        <tr>
                            <th>Sənədin adı</th>
                            <th>Növü</th>
                            <th>Vərəq sayı</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

        </div>
    </div>
    <footer></footer>
    <script>
    $(document).ready(function () {

        var oTable = $("#attachTable").DataTable({
            destroy: true,
            searching: false,
            paging: false,
            "ajax": {
                "url": "/OutDoc/GetAttachedFilesByDocID?id=" + @Model.docID,
                "type": "GET",
                "datatype": "json"
            },
            "columns": [
                {
                    "data": "dfTitle", "render": function (data, type, row, meta) {
                        return '<a href="/DocumentFiles/' + row.dfName + '" target="_blank">' + row.dfTitle + '</a>';
                    }
                },
                { "data": "attFileTypeTitle" },
                { "data": "dfPageCount" },
                //{
                //    "data": "dfID", "width": "50px", "render": function (data) {
                //        return '<a href="#" id="' + data + '" class="delete"><i class="fa fa-trash-o"></i></a>';
                //    }
                //}
            ]
        });

        var organTable = $("#organizationTable").DataTable({
            destroy: true,
            searching: false,
            paging: false,
            "ajax": {
                "url": "/OutDoc/GetOrganization?docid=" + @Model.docID,
                "type": "GET",
                "datatype": "json"
            },
            "columns": [
                { "data": "orgTitle" },
                { "data": "inchargeTitle" },
                //{
                //    "data": "id", "width": "50px", "render": function (data) {
                //        return '<a href="#" id="' + data + '" class="delete"><i class="fa fa-trash-o"></i></a>';
                //    }
                //}
            ]
        });

        $.get("/OutDoc/FillCities", { id: @Model.countryID }, function (data) {
            $("#cityID").append("<option value='0'>Seçin</option>");
            $.each(data, function (index, row) {
                $("#cityID").append("<option value='" + row.id + "'>" + row.title + "</option>");
                $("#cityID").val(@Model.cityID);
            });
        });

        $.get("/OutDoc/FillCities", { id: @Model.cityID }, function (data) {
            $("#townID").append("<option value='0'>Seçin</option>");
            $.each(data, function (index, row) {
                $("#townID").append("<option value='" + row.id + "'>" + row.title + "</option>");
                $("#townID").val(@Model.townID);
            });
        });


    });
    </script>
